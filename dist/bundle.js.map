{"version":3,"file":"bundle.js","sources":["webpack:///webpack/bootstrap 55dbf026bf0dcafee5af","webpack:///./src/index.ts","webpack:///./src/main-menu.ts","webpack:///./src/base-level.ts","webpack:///./src/player.ts"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 55dbf026bf0dcafee5af\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n/// <reference path=\"../typings/browser.d.ts\"/>\n/// <reference path=\"../public/lib/phaser.d.ts\"/>\nvar Phaser = require('phaser');\nvar main_menu_ts_1 = require('./main-menu.ts');\nvar base_level_ts_1 = require('./base-level.ts');\nvar DrPhase = (function (_super) {\n    __extends(DrPhase, _super);\n    function DrPhase(width, height, game, name) {\n        _super.call(this, width, height, game, name);\n    }\n    return DrPhase;\n}(Phaser.Game));\nvar game = new DrPhase(800, 600, Phaser.AUTO, 'game');\ngame.state.add('MainMenu', main_menu_ts_1.MainMenu, true);\ngame.state.add('Level', base_level_ts_1.BaseLevel, true);\ngame.state.start('MainMenu');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.ts\n ** module id = 1\n ** module chunks = 0\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Phaser = require('phaser');\nvar MainMenu = (function (_super) {\n    __extends(MainMenu, _super);\n    function MainMenu() {\n        _super.call(this);\n        this.selected = 0;\n        this.style = {\n            font: \"bold 32px Arial\",\n            fill: \"#fff\",\n            boundsAlignH: \"center\",\n            boundsAlignV: \"middle\"\n        };\n        this.levels = [\n            'Friday Night',\n            'TBA',\n            'TBA',\n            'TBA',\n            'TBA',\n        ];\n    }\n    MainMenu.prototype.preload = function () { };\n    MainMenu.prototype.create = function () {\n        var _this = this;\n        this.game.stage.backgroundColor = '#337799';\n        var titleStyle = {\n            font: \"bold 46px Arial\",\n            fill: \"#d30\",\n            boundsAlignH: \"center\",\n            boundsAlignV: \"middle\"\n        };\n        var title = this.game.add.text(0, 0, \"Dr. Phase!\", titleStyle);\n        title.setShadow(3, 3, 'rgba(0,0,0,0.5)', 2);\n        title.setTextBounds(0, 0, 800, 100);\n        this.bar = this.game.add.graphics();\n        for (var i = 0; i < this.levels.length; i++) {\n            this.drawText(this.levels[i], i);\n        }\n        ;\n        // Enable cursor keys so we can create some controls\n        this.cursors = this.game.input.keyboard.createCursorKeys();\n        this.game.input.onDown.add(function (event) {\n            var item = Math.floor((_this.game.input.y - 100) / 100);\n            if (item == 0) {\n                _this.game.state.start('Level', true, false, ['saturday_2']);\n            }\n            else {\n                console.log(\"Invalid level selected!\");\n            }\n        });\n    };\n    MainMenu.prototype.update = function () {\n        this.selected = Math.floor((this.game.input.y - 100) / 100);\n        if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.bar.clear();\n        this.bar.beginFill(0x000000, 0.2);\n        this.bar.drawRect(0, (100 * this.selected) + 100, 800, 100);\n    };\n    MainMenu.prototype.drawText = function (name, pos) {\n        //  The Text is positioned at 0, 100\n        var text = this.game.add.text(0, 0, name, this.style);\n        text.setShadow(3, 3, 'rgba(0,0,0,0.5)', 2);\n        //  We'll set the bounds to be from x0, y100 and be 800px wide by 100px high\n        var line = pos * 100 + 100;\n        text.setTextBounds(0, line, 800, 100);\n    };\n    return MainMenu;\n}(Phaser.State));\nexports.MainMenu = MainMenu;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/main-menu.ts\n ** module id = 3\n ** module chunks = 0\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Phaser = require('phaser');\nvar player_ts_1 = require('./player.ts');\nvar BaseLevel = (function (_super) {\n    __extends(BaseLevel, _super);\n    function BaseLevel() {\n        _super.call(this);\n        this.debug = false;\n    }\n    BaseLevel.prototype.preload = function () {\n        this.game.load.spritesheet('player', 'assets/tiles/cloud_water.png', 64, 64);\n        this.game.load.tilemap('saturday_2', 'assets/saturday_2.json', null, Phaser.Tilemap.TILED_JSON);\n        this.game.load.image('tiles', 'assets/tiles/saturday_roughfile.png');\n    };\n    BaseLevel.prototype.init = function (mapName) { this.mapName = mapName; };\n    BaseLevel.prototype.create = function () {\n        var _this = this;\n        this.game.physics.startSystem(Phaser.Physics.ARCADE);\n        this.game.stage.backgroundColor = \"#a9f0ff\";\n        this.map = new Map(this.game, this.mapName);\n        this.player = new player_ts_1.Player(this.game, this.map);\n        // Make the camera follow the sprite\n        this.game.camera.follow(this.player.sprite);\n        // Enable cursor keys so we can create some controls\n        this.cursors = this.game.input.keyboard.createCursorKeys();\n        var debugKey = this.game.input.keyboard.addKey(Phaser.Keyboard.M);\n        debugKey.onDown.add(function () { _this.debug = !_this.debug; });\n    };\n    BaseLevel.prototype.update = function () {\n        // TODO Instead of passing this directly, allow touch or keyboard input.\n        this.player.update(this.cursors);\n        if (this.debug) {\n            this.game.debug.spriteInfo(this.player.sprite, 32, 32);\n        }\n    };\n    BaseLevel.prototype.render = function () {\n        // Enable debugging for player body.\n        if (this.debug) {\n            this.game.debug.body(this.player.sprite);\n        }\n    };\n    return BaseLevel;\n}(Phaser.State));\nexports.BaseLevel = BaseLevel;\nvar Map = (function () {\n    function Map(game, mapName) {\n        // Add the tilemap and tileset image. The first parameter in addTilesetImage\n        // is the name you gave the tilesheet when importing it into Tiled, the\n        // second\n        // is the key to the asset in Phaser\n        this.tileMap = game.add.tilemap(mapName);\n        this.tileMap.addTilesetImage('platforms_ducts', 'tiles');\n        // Add both the background and ground layers. We won't be doing anything\n        // with the\n        // GroundLayer though\n        this.ductLayer = this.tileMap.createLayer('ducts');\n        this.platformLayer = this.tileMap.createLayer('platforms');\n        // Before you can use the collide function you need to set what tiles can\n        // collide\n        this.tileMap.setCollisionBetween(1, 100, true, 'platforms');\n        // Change the world size to match the size of this layer\n        this.platformLayer.resizeWorld();\n        this.makePlatformsOneWay();\n    }\n    // Example of how to work with the tilemap to change collision behavior.\n    Map.prototype.makePlatformsOneWay = function () {\n        var d = this.tileMap.layers[this.platformLayer.index].data;\n        console.log(d);\n        for (var row = 0; row < d.length; row++) {\n            for (var col = 0; col < d[row].length; col++) {\n                if (d[row][col].index > 0) {\n                    d[row][col].collideDown = false;\n                    d[row][col].collideLeft = false;\n                    d[row][col].collideRight = false;\n                }\n            }\n        }\n    };\n    return Map;\n}());\nexports.Map = Map;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/base-level.ts\n ** module id = 4\n ** module chunks = 0\n **/","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Phaser = require('phaser');\nvar Player = (function () {\n    function Player(game, map) {\n        var _this = this;\n        this.game = game;\n        this.map = map;\n        // Add the sprite to the game and enable arcade physics on it\n        this.sprite = game.add.sprite(10, 0, 'player');\n        this.game.physics.arcade.enable(this.sprite);\n        this.sprite.body.setSize(56, 56, 4, 0);\n        this.sprite.debug = true;\n        // Set some physics on the sprite\n        this.sprite.body.collideWorldBounds = true;\n        // The different characters are different frames in the same spritesheet.\n        this.sprite.animations.add('steam', [0, 1, 2, 1], 7, true);\n        this.sprite.animations.add('water', [3], 10, true);\n        this.waterState = new Water(this.sprite, this.map);\n        this.steamState = new Steam(this.sprite, this.map);\n        var dudeKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE);\n        var waterKey = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO);\n        var steamKey = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE);\n        // dudeKey.onDown.add(() => {this.changeState()});\n        waterKey.onDown.add(function () { _this.changeState(_this.waterState); });\n        steamKey.onDown.add(function () { _this.changeState(_this.steamState); });\n        // Start as water.\n        this.changeState(this.waterState);\n    }\n    Player.prototype.changeState = function (newState) {\n        newState.init();\n        this.currentState = newState;\n        console.log(\"Becoming state \", newState);\n    };\n    Player.prototype.update = function (cursors) {\n        // Make the sprite collide with the ground layer\n        this.game.physics.arcade.collide(this.sprite, this.map.platformLayer);\n        this.currentState.update(cursors);\n        // TODO: Remove this hack for falling through the floor.\n        if (this.sprite.y > 670) {\n            this.sprite.y = 650;\n            this.sprite.body.velocity.x = 0;\n        }\n        this.sprite.debug = true;\n    };\n    return Player;\n}());\nexports.Player = Player;\nvar CharacterState = (function () {\n    function CharacterState(sprite, map) {\n        this.sprite = sprite;\n        this.map = map;\n    }\n    CharacterState.prototype.init = function () { console.log(\"Init unimplemented\"); };\n    CharacterState.prototype.update = function (cursors) { console.log(\"Update unimplemented\"); };\n    return CharacterState;\n}());\nvar Water = (function (_super) {\n    __extends(Water, _super);\n    function Water() {\n        _super.apply(this, arguments);\n    }\n    Water.prototype.init = function () {\n        this.sprite.animations.play('water');\n        this.sprite.body.bounce.y = 0.2;\n        this.sprite.body.gravity.y = 2000;\n    };\n    Water.prototype.update = function (cursors) {\n        // Water can slide around.\n        if (cursors.left.isDown) {\n            this.sprite.body.velocity.x = -500;\n        }\n        else if (cursors.right.isDown) {\n            this.sprite.body.velocity.x = 500;\n        }\n        else {\n            this.sprite.body.velocity.x = 0;\n        }\n    };\n    return Water;\n}(CharacterState));\nvar Steam = (function (_super) {\n    __extends(Steam, _super);\n    function Steam() {\n        _super.apply(this, arguments);\n    }\n    Steam.prototype.init = function () {\n        this.sprite.animations\n            .play(\"steam\");\n        this.sprite.body.bounce.y = 0.4;\n        this.sprite.body.gravity.y = -2000;\n    };\n    Steam.prototype.update = function (cursors) {\n        // Steam just rises.\n    };\n    return Steam;\n}(CharacterState));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/player.ts\n ** module id = 5\n ** module chunks = 0\n **/"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;","sourceRoot":""}